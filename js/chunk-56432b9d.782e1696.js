(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56432b9d"],{5616:function(e){e.exports={bgImg:"https://gitee.com/cloud_users/Cloud-management-system/raw/master/loginbg.jpg",helloTitle:"adminTitle",webIco:"https://gitee.com/cloud_users/Cloud-management-system/raw/master/yun.ico",menuLogo:"https://gitee.com/cloud_users/Cloud-management-system/raw/master/yun.ico",themeBackgroundColor:"#304156",themeTextColor:"#BFCBD9",iconUnifiedStyleColor:"#304156",iconUnifiedStyleFontSize:28,menuCollapse:!1,languageOpt:"zh-CN",languageList:{"zh-CN":"中文",en:"English"},showMenuLogo:!0,asideVisible:!0,homeQuickNav:!0,menuUnique:!0,rightClickMenu:!1,drawerVisible:!1,drawerDirection:"rtl",configThemeDisabled:!1,themePresetList:[{themeBackgroundColor:"#304156",themeTextColor:"#BFCBD9"}],helloMenuList:[{icon:"el-icon-sugar",title:"test",route:"test"},{icon:"el-icon-switch-button",title:"signOut",route:"login"}],test:[{text:"all",value:-1}]}},b301:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mainTag"},[e.otherInfo.bgImg?s("img",{staticClass:"w9999 h9999",staticStyle:{"object-fit":"cover"},attrs:{src:e.otherInfo.bgImg}}):e._e(),s("el-dialog",{attrs:{visible:!0,"show-close":!1,modal:!1,top:"30vh",width:e.dialogWidth,"custom-class":"transparent02"}},[s("el-row",{attrs:{slot:"title"},slot:"title"},[s("el-col",{staticStyle:{color:"#eee"},attrs:{xs:24,sm:24,md:16,lg:16,xl:18}},[s("div",{staticClass:"largeTitle",on:{dblclick:e.hiddRefresh}},[e._v(e._s(e.language[e.otherInfo.helloTitle]))])]),s("el-col",{staticClass:"alnrit",attrs:{xs:24,sm:24,md:8,lg:8,xl:6}},[s("SelectLanguage")],1)],1),s("el-form",{ref:"ruleForm",staticClass:"alncnt",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("ruleForm")}}},[s("el-form-item",{attrs:{prop:"username"}},[s("el-autocomplete",{staticClass:"width80",attrs:{size:"medium",maxlength:18,"prefix-icon":"el-icon-user","fetch-suggestions":e.querySearch},on:{select:e.handleSelect},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{staticClass:"width80",attrs:{type:"password",size:"medium",maxlength:20,"show-password":"","prefix-icon":"el-icon-tickets"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),s("el-form-item",{staticClass:"alncnt"},[s("mdb",{directives:[{name:"permission",rawName:"v-permission",value:1,expression:"1"}],staticClass:"width80",attrs:{size:"medium",type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v(" "+e._s(e.language.signIn))])],1)],1)],1)],1)},o=[],n=(s("a481"),s("96cf"),s("3b8d")),i=(s("6762"),s("2fdb"),s("d073")),a={mixins:[s("a496").default],name:"login",data:function(){return{ruleForm:{username:null,password:null},historicalAccount:{admin:"admin",tourist:"tourist",users:"users",other:"other"}}},components:{SelectLanguage:function(){return s.e("chunk-3d13b4ce").then(s.bind(null,"31be"))}},props:{},computed:{rules:function(){var e={username:[{required:!0,message:"username",trigger:"blur"}],password:[{required:!0,message:"password",trigger:"blur"}]};return e},dialogWidth:function(){return this.otherInfo.menuCollapse?"75%":"25%"}},watch:{},methods:{handleSelect:function(e){this.ruleForm={username:e.value,password:e.password}},querySearch:function(e,t){var s=this,r=[];if(e)for(var o in s.historicalAccount)o.includes(e)&&r.push({password:this.$avoid(s.historicalAccount[o]),value:o});else for(var n in s.historicalAccount)r.push({password:this.$avoid(s.historicalAccount[n]),value:n});t(r)},hiddRefresh:function(){Object(i["g"])(),history.go(0)},resizeHandler:function(){var e=document.body.clientWidth;e<=963?this.setOtherInfo({menuCollapse:!0}):this.setOtherInfo({menuCollapse:!1})},setWebConfig:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=s("5616"),this.setOtherInfo(t),this.$setIco(this.otherInfo.webIco),this.resizeHandler();case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.login()})},login:function(){var e=this;this.post("/user/login",{username:e.ruleForm.username,password:e.ruleForm.password}).then(function(t){if(200==t.code){var s=t.data;e.$set(e.historicalAccount,e.ruleForm.username,e.ruleForm.password),e.setUserInfo({userName:s.username,userId:s.userid,userToken:s.token,userRole:s.userrole}),e.$router.replace({name:"test"})}})}},mounted:function(){this.ruleForm=Object(i["j"])("loginForm"),this.setWebConfig(),window.addEventListener("resize",this.resizeHandler)},beforeDestroy:function(){var e=this;window.removeEventListener("resize",this.resizeHandler),Object(i["k"])("userMemory",{userInfo:e.userInfo,otherInfo:e.otherInfo,language:e.language}),Object(i["k"])("loginForm",e.ruleForm)}},l=a,u=s("2877"),c=Object(u["a"])(l,r,o,!1,null,null,null);t["default"]=c.exports}}]);